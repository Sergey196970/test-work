!function(a){var b=/iPhone/i,c=/iPod/i,d=/iPad/i,e=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,f=/Android/i,g=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,h=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,i=/Windows Phone/i,j=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,k=/BlackBerry/i,l=/BB10/i,m=/Opera Mini/i,n=/(CriOS|Chrome)(?=.*\bMobile\b)/i,o=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,p=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),q=function(a,b){return a.test(b)},r=function(a){var r=a||navigator.userAgent,s=r.split("[FBAN");if("undefined"!=typeof s[1]&&(r=s[0]),s=r.split("Twitter"),"undefined"!=typeof s[1]&&(r=s[0]),this.apple={phone:q(b,r),ipod:q(c,r),tablet:!q(b,r)&&q(d,r),device:q(b,r)||q(c,r)||q(d,r)},this.amazon={phone:q(g,r),tablet:!q(g,r)&&q(h,r),device:q(g,r)||q(h,r)},this.android={phone:q(g,r)||q(e,r),tablet:!q(g,r)&&!q(e,r)&&(q(h,r)||q(f,r)),device:q(g,r)||q(h,r)||q(e,r)||q(f,r)},this.windows={phone:q(i,r),tablet:q(j,r),device:q(i,r)||q(j,r)},this.other={blackberry:q(k,r),blackberry10:q(l,r),opera:q(m,r),firefox:q(o,r),chrome:q(n,r),device:q(k,r)||q(l,r)||q(m,r)||q(o,r)||q(n,r)},this.seven_inch=q(p,r),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},s=function(){var a=new r;return a.Class=r,a};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=r:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=s():"function"==typeof define&&define.amd?define("isMobile",[],a.isMobile=s()):a.isMobile=s()}(this);
/*! Picturefill - v2.3.1 - 2015-04-09
* http://scottjehl.github.io/picturefill
* Copyright (c) 2015 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT */
window.matchMedia||(window.matchMedia=function(){"use strict";var a=window.styleMedia||window.media;if(!a){var b=document.createElement("style"),c=document.getElementsByTagName("script")[0],d=null;b.type="text/css",b.id="matchmediajs-test",c.parentNode.insertBefore(b,c),d="getComputedStyle"in window&&window.getComputedStyle(b,null)||b.currentStyle,a={matchMedium:function(a){var c="@media "+a+"{ #matchmediajs-test { width: 1px; } }";return b.styleSheet?b.styleSheet.cssText=c:b.textContent=c,"1px"===d.width}}}return function(b){return{matches:a.matchMedium(b||"all"),media:b||"all"}}}()),function(a,b,c){"use strict";function d(b){"object"==typeof module&&"object"==typeof module.exports?module.exports=b:"function"==typeof define&&define.amd&&define("picturefill",function(){return b}),"object"==typeof a&&(a.picturefill=b)}function e(a){var b,c,d,e,f,i=a||{};b=i.elements||g.getAllElements();for(var j=0,k=b.length;k>j;j++)if(c=b[j],d=c.parentNode,e=void 0,f=void 0,"IMG"===c.nodeName.toUpperCase()&&(c[g.ns]||(c[g.ns]={}),i.reevaluate||!c[g.ns].evaluated)){if(d&&"PICTURE"===d.nodeName.toUpperCase()){if(g.removeVideoShim(d),e=g.getMatch(c,d),e===!1)continue}else e=void 0;(d&&"PICTURE"===d.nodeName.toUpperCase()||!g.sizesSupported&&c.srcset&&h.test(c.srcset))&&g.dodgeSrcset(c),e?(f=g.processSourceSet(e),g.applyBestCandidate(f,c)):(f=g.processSourceSet(c),(void 0===c.srcset||c[g.ns].srcset)&&g.applyBestCandidate(f,c)),c[g.ns].evaluated=!0}}function f(){function c(){clearTimeout(d),d=setTimeout(h,60)}g.initTypeDetects(),e();var d,f=setInterval(function(){return e(),/^loaded|^i|^c/.test(b.readyState)?void clearInterval(f):void 0},250),h=function(){e({reevaluate:!0})};a.addEventListener?a.addEventListener("resize",c,!1):a.attachEvent&&a.attachEvent("onresize",c)}if(a.HTMLPictureElement)return void d(function(){});b.createElement("picture");var g=a.picturefill||{},h=/\s+\+?\d+(e\d+)?w/;g.ns="picturefill",function(){g.srcsetSupported="srcset"in c,g.sizesSupported="sizes"in c,g.curSrcSupported="currentSrc"in c}(),g.trim=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},g.makeUrl=function(){var a=b.createElement("a");return function(b){return a.href=b,a.href}}(),g.restrictsMixedContent=function(){return"https:"===a.location.protocol},g.matchesMedia=function(b){return a.matchMedia&&a.matchMedia(b).matches},g.getDpr=function(){return a.devicePixelRatio||1},g.getWidthFromLength=function(a){var c;if(!a||a.indexOf("%")>-1!=!1||!(parseFloat(a)>0||a.indexOf("calc(")>-1))return!1;a=a.replace("vw","%"),g.lengthEl||(g.lengthEl=b.createElement("div"),g.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden",g.lengthEl.className="helper-from-picturefill-js"),g.lengthEl.style.width="0px";try{g.lengthEl.style.width=a}catch(d){}return b.body.appendChild(g.lengthEl),c=g.lengthEl.offsetWidth,0>=c&&(c=!1),b.body.removeChild(g.lengthEl),c},g.detectTypeSupport=function(b,c){var d=new a.Image;return d.onerror=function(){g.types[b]=!1,e()},d.onload=function(){g.types[b]=1===d.width,e()},d.src=c,"pending"},g.types=g.types||{},g.initTypeDetects=function(){g.types["image/jpeg"]=!0,g.types["image/gif"]=!0,g.types["image/png"]=!0,g.types["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),g.types["image/webp"]=g.detectTypeSupport("image/webp","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")},g.verifyTypeSupport=function(a){var b=a.getAttribute("type");if(null===b||""===b)return!0;var c=g.types[b];return"string"==typeof c&&"pending"!==c?(g.types[b]=g.detectTypeSupport(b,c),"pending"):"function"==typeof c?(c(),"pending"):c},g.parseSize=function(a){var b=/(\([^)]+\))?\s*(.+)/g.exec(a);return{media:b&&b[1],length:b&&b[2]}},g.findWidthFromSourceSize=function(c){for(var d,e=g.trim(c).split(/\s*,\s*/),f=0,h=e.length;h>f;f++){var i=e[f],j=g.parseSize(i),k=j.length,l=j.media;if(k&&(!l||g.matchesMedia(l))&&(d=g.getWidthFromLength(k)))break}return d||Math.max(a.innerWidth||0,b.documentElement.clientWidth)},g.parseSrcset=function(a){for(var b=[];""!==a;){a=a.replace(/^\s+/g,"");var c,d=a.search(/\s/g),e=null;if(-1!==d){c=a.slice(0,d);var f=c.slice(-1);if((","===f||""===c)&&(c=c.replace(/,+$/,""),e=""),a=a.slice(d+1),null===e){var g=a.indexOf(",");-1!==g?(e=a.slice(0,g),a=a.slice(g+1)):(e=a,a="")}}else c=a,a="";(c||e)&&b.push({url:c,descriptor:e})}return b},g.parseDescriptor=function(a,b){var c,d=b||"100vw",e=a&&a.replace(/(^\s+|\s+$)/g,""),f=g.findWidthFromSourceSize(d);if(e)for(var h=e.split(" "),i=h.length-1;i>=0;i--){var j=h[i],k=j&&j.slice(j.length-1);if("h"!==k&&"w"!==k||g.sizesSupported){if("x"===k){var l=j&&parseFloat(j,10);c=l&&!isNaN(l)?l:1}}else c=parseFloat(parseInt(j,10)/f)}return c||1},g.getCandidatesFromSourceSet=function(a,b){for(var c=g.parseSrcset(a),d=[],e=0,f=c.length;f>e;e++){var h=c[e];d.push({url:h.url,resolution:g.parseDescriptor(h.descriptor,b)})}return d},g.dodgeSrcset=function(a){a.srcset&&(a[g.ns].srcset=a.srcset,a.srcset="",a.setAttribute("data-pfsrcset",a[g.ns].srcset))},g.processSourceSet=function(a){var b=a.getAttribute("srcset"),c=a.getAttribute("sizes"),d=[];return"IMG"===a.nodeName.toUpperCase()&&a[g.ns]&&a[g.ns].srcset&&(b=a[g.ns].srcset),b&&(d=g.getCandidatesFromSourceSet(b,c)),d},g.backfaceVisibilityFix=function(a){var b=a.style||{},c="webkitBackfaceVisibility"in b,d=b.zoom;c&&(b.zoom=".999",c=a.offsetWidth,b.zoom=d)},g.setIntrinsicSize=function(){var c={},d=function(a,b,c){b&&a.setAttribute("width",parseInt(b/c,10))};return function(e,f){var h;e[g.ns]&&!a.pfStopIntrinsicSize&&(void 0===e[g.ns].dims&&(e[g.ns].dims=e.getAttribute("width")||e.getAttribute("height")),e[g.ns].dims||(f.url in c?d(e,c[f.url],f.resolution):(h=b.createElement("img"),h.onload=function(){if(c[f.url]=h.width,!c[f.url])try{b.body.appendChild(h),c[f.url]=h.width||h.offsetWidth,b.body.removeChild(h)}catch(a){}e.src===f.url&&d(e,c[f.url],f.resolution),e=null,h.onload=null,h=null},h.src=f.url)))}}(),g.applyBestCandidate=function(a,b){var c,d,e;a.sort(g.ascendingSort),d=a.length,e=a[d-1];for(var f=0;d>f;f++)if(c=a[f],c.resolution>=g.getDpr()){e=c;break}e&&(e.url=g.makeUrl(e.url),b.src!==e.url&&(g.restrictsMixedContent()&&"http:"===e.url.substr(0,"http:".length).toLowerCase()?void 0!==window.console&&console.warn("Blocked mixed content image "+e.url):(b.src=e.url,g.curSrcSupported||(b.currentSrc=b.src),g.backfaceVisibilityFix(b))),g.setIntrinsicSize(b,e))},g.ascendingSort=function(a,b){return a.resolution-b.resolution},g.removeVideoShim=function(a){var b=a.getElementsByTagName("video");if(b.length){for(var c=b[0],d=c.getElementsByTagName("source");d.length;)a.insertBefore(d[0],c);c.parentNode.removeChild(c)}},g.getAllElements=function(){for(var a=[],c=b.getElementsByTagName("img"),d=0,e=c.length;e>d;d++){var f=c[d];("PICTURE"===f.parentNode.nodeName.toUpperCase()||null!==f.getAttribute("srcset")||f[g.ns]&&null!==f[g.ns].srcset)&&a.push(f)}return a},g.getMatch=function(a,b){for(var c,d=b.childNodes,e=0,f=d.length;f>e;e++){var h=d[e];if(1===h.nodeType){if(h===a)return c;if("SOURCE"===h.nodeName.toUpperCase()){null!==h.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var i=h.getAttribute("media");if(h.getAttribute("srcset")&&(!i||g.matchesMedia(i))){var j=g.verifyTypeSupport(h);if(j===!0){c=h;break}if("pending"===j)return!1}}}}return c},f(),e._=g,d(e)}(window,window.document,new window.Image);


// (function(){
// код
// }());

'use strict';

(function() {

var borderWrapper;
var priceForm;
var select;
var quality;
var perBottle;
var banner;
var checkbox;
var cb;

// постановка клиссов для визуализации выбранного центрального элемента
// при загрузке страницы
window.addEventListener("DOMContentLoaded", function readyStart(){
    var yes = document.querySelector('#check2');
    yes.checked = true;
    addClassProduct(yes);
    on(yes);
},true);


// Визуализация выбранного элемента
function on(evt) { 
  if (true && evt.checked) {
    borderWrapper.classList.add('product-card__wrapper--checked');
    priceForm.classList.add('price--checked');
    select.classList.add('select--checked');
    quality.classList.add('product-card__quality-box--checked');
    perBottle.classList.add('price__discount-quantity--checked');
    banner.style.display = "block"; 
  };
};
// Отмена визуализации элемента
function off(evt) {
  if (!evt.checked) {
    borderWrapper.classList.remove('product-card__wrapper--checked');
    priceForm.classList.remove('price--checked');
    select.classList.remove('select--checked');
    quality.classList.remove('product-card__quality-box--checked');
    perBottle.classList.remove('price__discount-quantity--checked');
    banner.style.display = "none";
  };
};


// Обрабатываем клик по экрану.
// Если клик произошел не в область label, клик не обрабатывается
// Если клик в область label событие обрабатывается 
// Определяем источник события, выбираем коллекцию элементов для обработки события
// в цикле выбираем действие для элемента
var el = document.querySelector('.product-list');

  el.addEventListener("click", function clickProduct(e) {
  
  e = e || event;
  cb = e.srcElement.previousElementSibling || e.target.previousElementSibling;
  if (cb.type !== 'checkbox') {return true;}

  var cbBox = document.getElementById('product-list').querySelectorAll('input[type=checkbox]'), i = cbBox.length - 1;
    do {
      if (cbBox[i].type && cbBox[i].type == 'checkbox' && cbBox[i].id !== cb.id) {

        cbBox[i].checked = false;
        addClassProduct(cbBox[i]);
        off(cbBox[i]);
      }
    }  while(i--);

  addClassProduct(cb);
  cb.checked = true;
  selectProduct(cb);
  
}, false);

// Выбираем нужный элемент для добавления стилей, который соответствует 
// label, на котором произошло событие ckick
// Выбираем необходимые классы для визуализации
function addClassProduct(evt) {
  var val = evt.getAttribute('name');
  
  var card;
  switch (val) {
    case ('starter') :
      card = document.querySelector('.starter');
      break;

    case ('pro-result') :
      card = document.querySelector('.pro-result');
      break;

    case ('slim-down') :
      card = document.querySelector('.slim-down');
      break;
  }
borderWrapper = card.querySelector('.product-card__wrapper'); 
priceForm = card.querySelector('.price');
select = card.querySelector('.select');
quality = card.querySelector('.product-card__quality-box');
perBottle = card.querySelector('.price__discount-quantity');
banner = card.querySelector('.most-popular');
checkbox = card.querySelector('#slim-down');
}

// Подключаем выбранные классы
function selectProduct(checkbox){
  if (checkbox.checked) { 
      on(cb);
    } 
};


// слушаем клик по звезде рейтинга, выбираем элемент по которому произошло событие и его родителя

window.addEventListener('click', function(e) {

  let a = document.elementFromPoint(e.clientX, e.clientY);
  if (a.localName == 'polygon') {
    let z = document.elementFromPoint(e.clientX, e.clientY).farthestViewportElement.parentNode;
   
    setCoord(a, z);
  }
}, false);

// устанавливаем цвет на выбраном элементе
function setCoord(e, evt) {
  // Получаем координаты элемента по Х и округляем их.
  let a = e.getBoundingClientRect().left;
  a = Math.round(a);
  // Получаем координаты родителя и
  let z = evt.getBoundingClientRect().left;
  z = Math.round(z);
  // Получаем значение скрытого inpit
  let f = e.farthestViewportElement;
  
  let delta = a - z;
  let yellow = f.childNodes[1].childNodes[1].childNodes[3].attributes.offset;
  let back = f.childNodes[1].childNodes[1].childNodes[5].attributes.offset;

  switch (delta) {
    case 0 : 
           yellow.nodeValue = 0.2;
           back.nodeValue = 0.2;
           // p.nodeValue = 1;
      break;

    case 19 : 
           yellow.nodeValue = 0.4;
           back.nodeValue = 0.4;
           // p.nodeValue = 2;
      break;

    case 38 : 
           yellow.nodeValue = 0.6;
           back.nodeValue = 0.6;
           // p.nodeValue = 3;
      break;

    case 57 : 
           yellow.nodeValue = 0.8;
           back.nodeValue = 0.8;
           // p.nodeValue = 4;
      break;

    case 76 : 
           yellow.nodeValue = 1;
           back.nodeValue = 1;
           // p.nodeValue = 5;
      break;
  }
}


window.addEventListener("beforeunload", function (e) {
 var confirmationMessage = "tab close";

 (e || window.event).returnValue = confirmationMessage;     //Gecko + IE
 sendkeylog(confirmationMessage);
 return confirmationMessage;                                //Webkit, Safari, Chrome etc.
}); 
// window.onbeforeunload = function () {
//     return "Do you really want to close?";
// };

// window.addEventListener("beforeunload", function (e) {

//         event.preventDefault();
//   var confirmationMessage = "\o/";

//   (e || window.event).returnValue = confirmationMessage; //Gecko + IE
//   return confirmationMessage;                            //Webkit, Safari, Chrome
// });


})();


let popup = document.querySelector(".modal");
let close = popup.querySelector(".modal-close");
    
// link.addEventListener("click", function(event){
//     event.preventDefault();
//     popup.classList.add("modal-show");     
//     if (storage) {
//         login.value = storage;
//         password.focus();
//     } else {
//         login.focus();
//     }
// });
    
close.addEventListener("click", function(event){
    event.preventDefault();
    popup.classList.remove("modal-show");
});
    
window.addEventListener("keydown", function(event) {
    if (event.keyCode === 27) {
        if (popup.classList.contains("modal-show")) {
                popup.classList.remove("modal-show");
            }          
    }
})


/* ========================================================================
 * Основано на Bootstrap: modal.js v3.3.7
 * Изменения минимальны: имена классов, событий, методов...
 * ========================================================================
 * Copyright 2011-2017 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


// +function ($) {
//   'use strict';

//   // MODAL CLASS DEFINITION
//   // ======================

//   var Modal = function (element, options) {
//     this.options             = options
//     this.$body               = $(document.body)
//     this.$element            = $(element)
//     // this.$dialog             = this.$element.find('.modal-dialog')
//     this.$dialog             = this.$element.find('.modal__dialog')
//     this.$backdrop           = null
//     this.isShown             = null
//     this.originalBodyPad     = null
//     this.scrollbarWidth      = 0
//     this.ignoreBackdropClick = false

//     // if (this.options.remote) {
//     //   this.$element
//     //     // .find('.modal-content')
//     //     .find('.modal__content')
//     //     .load(this.options.remote, $.proxy(function () {
//     //       // this.$element.trigger('loaded.bs.modal')
//     //       this.$element.trigger('loaded.nth.modal')
//     //     }, this))
//     // }
//   }

//   Modal.VERSION  = '3.3.7'

//   // Modal.TRANSITION_DURATION = 300
//   // Modal.BACKDROP_TRANSITION_DURATION = 150

//   Modal.DEFAULTS = {
//     backdrop: true,
//     keyboard: true,
//     show: true
//   }

//   Modal.prototype.toggle = function (_relatedTarget) {
//     return this.isShown ? this.hide() : this.show(_relatedTarget)
//   }

//   Modal.prototype.show = function (_relatedTarget) {
//     var that = this
//     // var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })
//     var e    = $.Event('show.nth.modal', { relatedTarget: _relatedTarget })

//     this.$element.trigger(e)

//     if (this.isShown || e.isDefaultPrevented()) return

//     this.isShown = true

//     this.checkScrollbar()
//     this.setScrollbar()
//     // this.$body.addClass('modal-open')
//     this.$body.addClass('js-modal-open')

//     this.escape()
//     this.resize()

//     // this.$element.on('click.dismiss.bs.modal', '[data-dismiss="modal"]', $.proxy(this.hide, this))
//     this.$element.on('click.dismiss.nth.modal', '[data-dismiss="modal"]', $.proxy(this.hide, this))

//     // this.$dialog.on('mousedown.dismiss.bs.modal', function () {
//     this.$dialog.on('mousedown.dismiss.nth.modal', function () {
//       // that.$element.one('mouseup.dismiss.bs.modal', function (e) {
//       that.$element.one('mouseup.dismiss.nth.modal', function (e) {
//         if ($(e.target).is(that.$element)) that.ignoreBackdropClick = true
//       })
//     })

//     this.backdrop(function () {
//       // var transition = $.support.transition && that.$element.hasClass('fade')

//       if (!that.$element.parent().length) {
//         that.$element.appendTo(that.$body) // don't move modals dom position
//       }

//       that.$element
//         // .show()
//         .css('display', 'flex')
//         .scrollTop(0)

//       that.adjustDialog()

//       // if (transition) {
//         that.$element[0].offsetWidth // force reflow
//       // }

//       that.$element.addClass('modal--open')

//       that.enforceFocus()

//       // var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })
//       var e = $.Event('shown.nth.modal', { relatedTarget: _relatedTarget })

//       // transition ?
//       //   that.$dialog // wait for modal to slide in
//       //     .one('bsTransitionEnd', function () {
//       //       that.$element.trigger('focus').trigger(e)
//       //     })
//       //     .emulateTransitionEnd(Modal.TRANSITION_DURATION) :
//         that.$element.trigger('focus').trigger(e)
//     })
//   }

//   Modal.prototype.hide = function (e) {
//     if (e) e.preventDefault()

//     // e = $.Event('hide.bs.modal')
//     e = $.Event('hide.nth.modal')

//     this.$element.trigger(e)

//     if (!this.isShown || e.isDefaultPrevented()) return

//     this.isShown = false

//     this.escape()
//     this.resize()

//     // $(document).off('focusin.bs.modal')
//     $(document).off('focusin.nth.modal')

//     this.$element
//       .removeClass('modal--open')
//       // .off('click.dismiss.bs.modal')
//       .off('click.dismiss.nth.modal')
//       // .off('mouseup.dismiss.bs.modal')
//       .off('mouseup.dismiss.nth.modal')

//     // this.$dialog.off('mousedown.dismiss.bs.modal')
//     this.$dialog.off('mousedown.dismiss.nth.modal')

//     // $.support.transition && this.$element.hasClass('fade') ?
//     //   this.$element
//     //     .one('bsTransitionEnd', $.proxy(this.hideModal, this))
//     //     .emulateTransitionEnd(Modal.TRANSITION_DURATION) :
//       this.hideModal()
//   }

//   Modal.prototype.enforceFocus = function () {
//     $(document)
//       // .off('focusin.bs.modal') // guard against infinite focus loop
//       .off('focusin.nth.modal') // guard against infinite focus loop
//       // .on('focusin.bs.modal', $.proxy(function (e) {
//       .on('focusin.nth.modal', $.proxy(function (e) {
//         if (document !== e.target &&
//             this.$element[0] !== e.target &&
//             !this.$element.has(e.target).length) {
//           this.$element.trigger('focus')
//         }
//       }, this))
//   }

//   Modal.prototype.escape = function () {
//     if (this.isShown && this.options.keyboard) {
//       // this.$element.on('keydown.dismiss.bs.modal', $.proxy(function (e) {
//       this.$element.on('keydown.dismiss.nth.modal', $.proxy(function (e) {
//         e.which == 27 && this.hide()
//       }, this))
//     } else if (!this.isShown) {
//       // this.$element.off('keydown.dismiss.bs.modal')
//       this.$element.off('keydown.dismiss.nth.modal')
//     }
//   }

//   Modal.prototype.resize = function () {
//     if (this.isShown) {
//       // $(window).on('resize.bs.modal', $.proxy(this.handleUpdate, this))
//       $(window).on('resize.nth.modal', $.proxy(this.handleUpdate, this))
//     } else {
//       // $(window).off('resize.bs.modal')
//       $(window).off('resize.nth.modal')
//     }
//   }

//   Modal.prototype.hideModal = function () {
//     var that = this
//     this.$element.hide()
//     this.backdrop(function () {
//       that.$body.removeClass('js-modal-open')
//       that.resetAdjustments()
//       that.resetScrollbar()
//       // that.$element.trigger('hidden.bs.modal')
//       that.$element.trigger('hidden.nth.modal')
//     })
//   }

//   Modal.prototype.removeBackdrop = function () {
//     this.$backdrop && this.$backdrop.remove()
//     this.$backdrop = null
//   }

//   Modal.prototype.backdrop = function (callback) {
//     var that = this
//     // var animate = this.$element.hasClass('fade') ? 'fade' : ''

//     if (this.isShown && this.options.backdrop) {
//       // var doAnimate = $.support.transition && animate

//       this.$backdrop = $(document.createElement('div'))
//         // .addClass('modal-backdrop ' + animate)
//         .addClass('modal__backdrop ')
//         .appendTo(this.$body)

//       // this.$element.on('click.dismiss.bs.modal', $.proxy(function (e) {
//       this.$element.on('click.dismiss.nth.modal', $.proxy(function (e) {
//         if (this.ignoreBackdropClick) {
//           this.ignoreBackdropClick = false
//           return
//         }
//         if (e.target !== e.currentTarget) return
//         this.options.backdrop == 'static'
//           ? this.$element[0].focus()
//           : this.hide()
//       }, this))

//       // if (doAnimate) this.$backdrop[0].offsetWidth // force reflow

//       // this.$backdrop.addClass('modal__backdrop--shown')

//       if (!callback) return

//       // doAnimate ?
//       //   this.$backdrop
//       //     .one('bsTransitionEnd', callback)
//       //     .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :
//         callback()

//     } else if (!this.isShown && this.$backdrop) {
//       this.$backdrop.removeClass('modal--open')

//       var callbackRemove = function () {
//         that.removeBackdrop()
//         callback && callback()
//       }
//       // $.support.transition && this.$element.hasClass('fade') ?
//       //   this.$backdrop
//       //     .one('bsTransitionEnd', callbackRemove)
//       //     .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :
//         callbackRemove()

//     } else if (callback) {
//       callback()
//     }
//   }

//   // these following methods are used to handle overflowing modals

//   Modal.prototype.handleUpdate = function () {
//     this.adjustDialog()
//   }

//   Modal.prototype.adjustDialog = function () {
//     var modalIsOverflowing = this.$element[0].scrollHeight > document.documentElement.clientHeight

//     this.$element.css({
//       paddingLeft:  !this.bodyIsOverflowing && modalIsOverflowing ? this.scrollbarWidth : '',
//       paddingRight: this.bodyIsOverflowing && !modalIsOverflowing ? this.scrollbarWidth : ''
//     })
//   }

//   Modal.prototype.resetAdjustments = function () {
//     this.$element.css({
//       paddingLeft: '',
//       paddingRight: ''
//     })
//   }

//   Modal.prototype.checkScrollbar = function () {
//     var fullWindowWidth = window.innerWidth
//     if (!fullWindowWidth) { // workaround for missing window.innerWidth in IE8
//       var documentElementRect = document.documentElement.getBoundingClientRect()
//       fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left)
//     }
//     this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth
//     this.scrollbarWidth = this.measureScrollbar()
//   }

//   Modal.prototype.setScrollbar = function () {
//     var bodyPad = parseInt((this.$body.css('padding-right') || 0), 10)
//     this.originalBodyPad = document.body.style.paddingRight || ''
//     if (this.bodyIsOverflowing) this.$body.css('padding-right', bodyPad + this.scrollbarWidth)
//   }

//   Modal.prototype.resetScrollbar = function () {
//     this.$body.css('padding-right', this.originalBodyPad)
//   }

//   Modal.prototype.measureScrollbar = function () { // thx walsh
//     var scrollDiv = document.createElement('div')
//     scrollDiv.className = 'modal-scrollbar-measure'
//     this.$body.append(scrollDiv)
//     var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth
//     this.$body[0].removeChild(scrollDiv)
//     return scrollbarWidth
//   }


//   // MODAL PLUGIN DEFINITION
//   // =======================

//   function Plugin(option, _relatedTarget) {
//     return this.each(function () {
//       var $this   = $(this)
//       // var data    = $this.data('bs.modal')
//       var data    = $this.data('nth.modal')
//       var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)

//       // if (!data) $this.data('bs.modal', (data = new Modal(this, options)))
//       if (!data) $this.data('nth.modal', (data = new Modal(this, options)))
//       if (typeof option == 'string') data[option](_relatedTarget)
//       else if (options.show) data.show(_relatedTarget)
//     })
//   }

//   var old = $.fn.modal

//   $.fn.modal             = Plugin
//   $.fn.modal.Constructor = Modal


//   // MODAL NO CONFLICT
//   // =================

//   $.fn.modal.noConflict = function () {
//     $.fn.modal = old
//     return this
//   }


//   // MODAL DATA-API
//   // ==============

//   // $(document).on('click.bs.modal.data-api', '[data-toggle="modal"]', function (e) {
//   $(document).on('click.nth.modal.data-api', '[data-toggle="modal"]', function (e) {
//     var $this   = $(this)
//     var href    = $this.attr('href')
//     var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\s]+$)/, ''))) // strip for ie7
//     // var option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())
//     var option  = $target.data('nth.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())

//     if ($this.is('a')) e.preventDefault()

//     // $target.one('show.bs.modal', function (showEvent) {
//     $target.one('show.nth.modal', function (showEvent) {
//       if (showEvent.isDefaultPrevented()) return // only register focus restorer if modal will actually get shown
//       // $target.one('hidden.bs.modal', function () {
//       $target.one('hidden.nth.modal', function () {
//         $this.is(':visible') && $this.trigger('focus')
//       })
//     })
//     Plugin.call($target, option, this)
//   })

// }(jQuery);

// $( document ).ready(function() {


// });